<html>
<head>
  <style>
  div, textarea {
    font-family: courier;
    white-space: pre-wrap;
  }
  div {
    color: #cccccc;
  }
  td {
    vertical-align: top;
  }
  .important {
    color: #ffffff;
    background-color: #000000;
    font-weight: bold;
  }
  #instructions {
    background-color: #222222;
    padding: 5px;
    margin: 5px;
  }
  </style>
  <script>
  
  var lenses = {
      "parens":         [ /[)(]/g, "Parentheses usually need to be paired () and are used following the names of functions, conditionals, and loops and to make the order of mathematical and logical operations explicit"],
      "brackets":       [ /[\]\[]/g, "Brackets usually need to be paired [] and are used to access elements in an array"],
      "braces":         [ /[}{]/g, "Braces usually need to be paired {} and are used (1) to surround lines of code that should be executed together (also known as code blocks) and (2) to define JavaScript objects (also known as JSON)"],
      // any < > in the source would have been converted to html entities
      "html_tags":      [ /&lt;.*?&gt;/g, "Opening and closing HTML tags usually need to be paired &lt;tag&gt;...&lt;/tag&gt;"], 
      "qstring":        [ /\'.*?\'/g, "Single-quoted (apostrophe: ') strings"],
      "qqstring":       [ /\".*?\"/g, "Double-quoted (quotation mark: \") strings"],
      //"paired":       [ /[}{)(\]\[]/g, ""],
      "comment":        [ /\/\/.*/g, "Single line comments should explain why lines or blocks of code exist rather than simply restating what they're doing (e.g., 'multiplier for the sales tax rate' rather than 'set x to 1.05')"],
      "eol":            [ /;[\s]*[\r\n]+/g, "Expressions should usually end with a semicolon;"],
      "math_ops":       [ /( \-\d| \+ | \- | \/ | \* |\+\+|\-\-)/g, "Mathematical operators that take two arguments (e.g., a + b) should have a space on either side of the operator"],
      "assignment":     [ / (=|\+=|\-=|\*=|\/=) /g, "Assignment of values to variables (e.g., x = 5) should have a space on either side of the assignment operator"],
      "comparison":     [ / (==|!=|===|!==|&lt;|&gt;|&lt;=|&gt;=) /g, "Tests of equality (==, !=), inequality(&lt;, &gt;, &lt;=, &gt;=), and identity(===, !==) should have a space on either side of the operator"],
      "logic":          [ /(!| && | \|\| )/g, "Boolean AND (&&) and OR (||) should have a space on either side of the operator (e.g., a && b)"],
      "unique_symbols": [ symbols, "Check for subtle typos, such as getElementById vs. getElementbyId or innerHTML vs. innerHMTL" ]
  }
  
  
  function process() {
    // lenses[key][0] == RegExp or function
    // lenses[key][1] == descriptive instructions
    
    var result;
    var source_el = document.getElementById("source");
    var source = source_el.value;

    source = source.replace( /</g , "&lt;");
    source = source.replace( />/g, "&gt;");
    
    for(key_idx in Object.keys(lenses)) {
      var key = Object.keys(lenses)[key_idx];
      el = document.getElementById(key);
      
      if(lenses[key][0] instanceof RegExp) {
        result = source.replace( lenses[key][0], "<span class='important'>$&</span>");
        //result = result.replace( /~</g , "&lt;");
        //result = result.replace( />~/g, "&gt;");
      } else if(typeof lenses[key][0] === "function") {
        result = lenses[key][0]();
      }
      
      el.innerHTML = result;
    }
  }
  
  function setupLenses() {
    for(var key_idx in Object.keys(lenses)) {
      var key = Object.keys(lenses)[key_idx];
    
      var div = document.createElement("div");
      div.id = key;
      document.getElementById("lens_panel").appendChild(div);
    
      var span = document.createElement("span");
      span.id = key + "_nav";
      span.class = key;
      span.onclick = switchLens;
      span.innerHTML = key + " | ";
      document.getElementById("nav_panel").appendChild(span);
    }
  }
  
  function hideLenses() {
    for(key_idx in Object.keys(lenses)) {
      var key = Object.keys(lenses)[key_idx];
      document.getElementById(key).style.display = "none";
      document.getElementById(key + "_nav").style.backgroundColor = "#ffffff";
    }
  }
  
  function switchLens(target){
    hideLenses();
    var selected_lens = target.srcElement.class;
    document.getElementById(selected_lens).style.display = "block";
    document.getElementById(selected_lens + "_nav").style.backgroundColor = "#aaaaff";
    
    document.getElementById("instructions").innerHTML = lenses[selected_lens][1];
  }
  
  function onlyUnique(value, index, self) { 
      return self.indexOf(value.trim()) === index;
  }
  
  function symbols() {
    var symbols = document.getElementById("source").value.split(/[ ;:=,<>\(\){}+=\-\|&$#"'\[\]\/!*\r\n]+/).filter( onlyUnique ).sort().join("<br>");
    return symbols;
  }
  
  </script>
</head>
<body>
  <table>
    <tr>
      <td>Paste or type code into the text area, below. Then, click one of the lens options at the right.</td>
      <td id="nav_panel"></tr>
    <tr>
      <td>
        <form>
          <textarea id="source" cols=80 rows=50>   function process() {
    var source_el = document.getElementById("source");
    var source = source_el.value;

    source = source.replace( /</g , "&lt;");
    source = source.replace( />/g, "&gt;");
    
    for(key_idx in Object.keys(lenses)) {
      var key = Object.keys(lenses)[key_idx];
      el = document.getElementById(key);
      result = source.replace( lenses[key], "<span class='important'>$&</span>");
      //result = result.replace( /~</g , "&lt;");
      //result = result.replace( />~/g, "&gt;");
      el.innerHTML = result;
    }

  }

if (x <= 4) 

x || 3
3 && 2
(!x < 10 && y > 1)
(x < 10 || y == 1) </textarea>
        </form>
      </td>
      <td id="lens_panel">
        <div id="instructions"></div>
      </td>
    </tr>
  </table>
  <script>
  setupLenses();
  hideLenses();
  
  document.getElementById("source").onkeyup = process;
  process();
  document.getElementById("parens_nav").click();
  
  //switchTab("instructions");
  </script>
</body>
</html>
